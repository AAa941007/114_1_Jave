---
title: 醫院門診預約管理系統

---

# 醫院門診預約管理系統

## 綜合整理規格書（精簡結構版）

---

## 一、系統架構總覽（Class & Interface Structure）

本系統採用 **Java 物件導向設計**，以「**繼承（Inheritance）**」與「**介面（Interface）**」為核心，先定義通用抽象結構，再依實際需求進行功能擴充。

### （一）類別層級設計

| 類別名稱         | 類型   | 專業角色定位                         |
| ------------ | ---- | ------------------------------ |
| Person       | 抽象類別 | 系統中所有人的最高層抽象父類別，定義基本屬性（姓名、電話等） |
| MedicalStaff | 抽象類別 | 醫療人員的中介抽象層，新增工號、科別等屬性          |
| Doctor       | 具體類別 | 實際看診的醫師，包含每日掛號上限與排班資訊          |
| Patient      | 具體類別 | 病患角色，負責保存掛號紀錄與病歷資料             |
| Appointment  | 抽象類別 | 掛號流程的抽象模板，實作模板方法模式             |

---

### （二）功能介面設計（Interfaces）

介面作為「功能外掛」，讓不同類別依需求實作對應能力：

* **Billable（可計費）**：定義費用計算規則（原價－保險給付＝實收金額）
* **Schedulable（可排班）**：提供醫師空檔搜尋與預約能力
* **Queueable（可排隊）**：急診依照嚴重程度（Priority）調整順序
* **Notifiable（可通知）**：提供簡訊、系統警示等通知機制

---

## 二、核心運作邏輯

### （一）掛號流程：模板方法模式（Template Method Pattern）

掛號流程被拆解為固定的五個步驟，由抽象類別統一規範流程骨架：

* 使用 `final void processBooking()` 鎖定演算法結構
* 允許子類別透過 Hook 方法進行彈性擴充

#### 掛號五步驟：

1. **preCheck（條件檢查）**

   * 病患是否超過 3 筆掛號
   * 醫師是否在職、是否達到每日上限

2. **onPreparing（準備階段）**

   * 一般門診：通知護理站
   * 急診：派遣急救小組

3. **beforeConfirm（確認前 Hook）**

   * 預留彈性檢查點

4. **executeBooking（執行掛號）**

   * 增加醫師看診人次
   * 鎖定對應時段

5. **afterConfirm（完成後 Hook）**

   * 發送成功通知或急診警示

---

### （二）病歷查詢：遞迴搜尋（Recursion）

* 病歷資料以 **Linked List（鏈結串列）** 方式儲存
* 查詢時透過遞迴逐節點比對

**演算法說明：**

* 每次檢查目前節點
* 若非目標資料，遞迴呼叫下一節點
* **Base Case**：當節點指向 `null` 時結束搜尋

---

## 三、系統限制與安全性（Constraints & Safety）

### （一）掛號限制規則

* 病患同時最多掛號 **3 筆**
* 醫師每日最多看診 **20 人**
* 醫師狀態為 `false（休假）` 時，禁止掛號

### （二）資料序列化安全（Serialization）

* 所有可序列化類別皆需定義 `serialVersionUID`
* 確保版本更新後仍能正確讀取舊資料

### （三）效能優化設計

* 備份資料時使用 **8KB BufferedOutputStream**
* 降低 I/O 次數，提高存取效能

---

## 四、資料管理與備份（ClinicManager）

系統中央管理元件，負責資料儲存、匯出與還原。

| 功能    | 技術手段               | 說明                      |
| ----- | ------------------ | ----------------------- |
| 全系統備份 | ObjectOutputStream | 將整個系統物件序列化為二進位檔         |
| 報表匯出  | BufferedWriter     | 輸出為 CSV（如 patients.csv） |
| 資料匯入  | CSV 解析             | 重新建構 Java 物件資料          |

---

## 五、學習重點整理（Summary Notes）

### 重要 Java 與設計觀念

* **SDD（規格驅動開發）**：先定義完整規格，再進行實作，避免功能偏離需求
* **IllegalArgumentException**：主動防止不合法參數進入系統
* **Stream API**：用於醫師空檔搜尋與資料快速過濾，使程式碼簡潔可讀

---


